\section{字典树}
    \subsection{代码}
\begin{lstlisting}
struct Trie {
    int nx[26];  // 每个字母对应的结点
    int v;       // 访问次数
} tr[N * 20];
int rt[26], cnt;  // 二十六个字母的根，已用节点数

int insert(char s[]) {
    int i, *p = &rt[s[0] - 'a'];  // p是下一个节点的编号
    int sum = 0;                  // 统计路径上的结点被访问的次数

    for (i = 0; s[i]; i++) {
        // 新建节点并初始化
        if (!*p) {
            *p = ++cnt;
            memset(tr[*p].nx, 0, sizeof(tr[*p].nx));
            tr[*p].v = 0;
        }

        // 访问次数+1
        ++tr[*p].v;

        // 统计
        sum += tr[*p].v;

        // 向下一个节点转移
        if (s[i + 1])
            p = &tr[*p].nx[s[i + 1] - 'a'];
    }

    return sum;
}

// 多样例时的初始化
inline void init() {
    memset(rt, 0, sizeof(rt));
    cnt = 0;
}
\end{lstlisting}